System.register("chunks:///_virtual/Ball.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n,o,r,a,l,u,d,s,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,l=i.Node,u=i.AudioClip,d=i.AudioSource,s=i.Vec3,h=i.Component}],execute:function(){var p,c,y,f,S,b,x,g,m,v,w,z;r._RF.push({},"f3fdbv7OQVIP40wXpC6nu/4","Ball",void 0);var B=a.ccclass,L=a.property;i("Ball",(p=B("Ball"),c=L(l),y=L(l),f=L(u),S=L(u),p((g=t((x=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r))||this,n(t,"speed",g,o(t)),n(t,"paddleLeft",m,o(t)),n(t,"paddleRight",v,o(t)),n(t,"hitSound",w,o(t)),n(t,"outSound",z,o(t)),t.direction=new s(1,1,0),t.audio=null,t}e(t,i);var r=t.prototype;return r.start=function(){this.audio=this.node.addComponent(d),this.hitSound&&console.log("hitSound loaded:",this.hitSound.name)},r.update=function(i){var t=this.node.position;t.x+=this.direction.x*this.speed*i,t.y+=this.direction.y*this.speed*i;if(t.y+10>=280?(t.y=270,this.direction.y*=-1,this.playSound(this.hitSound)):t.y-10<=-280&&(t.y=-270,this.direction.y*=-1,this.playSound(this.hitSound)),this.paddleLeft){var e=this.paddleLeft.position;t.x-10<e.x+10&&t.y+10>e.y-50&&t.y-10<e.y+50&&(t.x=e.x+20,this.direction.x=1,this.playSound(this.hitSound))}if(this.paddleRight){var n=this.paddleRight.position;t.x+10>n.x-10&&t.y+10>n.y-50&&t.y-10<n.y+50&&(t.x=n.x-20,this.direction.x=-1,this.playSound(this.hitSound))}this.node.setPosition(t),(t.x<-475||t.x>475)&&(this.playSound(this.outSound),this.node.emit("ball-out",t.x<0?"right":"left"))},r.resetBall=function(){this.node.setPosition(0,0);var i=Math.random()<.5?-1:1,t=Math.random()<.5?-1:1;this.direction=new s(i,t,0)},r.playSound=function(i){i&&this.audio&&this.audio.playOneShot(i,1)},t}(h)).prototype,"speed",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 600}}),m=t(x.prototype,"paddleLeft",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(x.prototype,"paddleRight",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(x.prototype,"hitSound",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(x.prototype,"outSound",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=x))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ball.ts"],(function(e){var t,r,n,a,i,o,l,c,s,u,h,p,d,f,b,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,c=e._decorator,s=e.Label,u=e.Node,h=e.AudioClip,p=e.AudioSource,d=e.Vec3,f=e.Color,b=e.tween,g=e.Component},function(e){m=e.Ball}],execute:function(){var v,S,w,y,x,k,B,L,R,P,_,T,C,E,z,D,A,G,O,U,W,Y,N;l._RF.push({},"30ba5UFPNpCgI3cET3lCFa6","GameManager",void 0);var I=c.ccclass,M=c.property;e("GameManager",(v=I("GameManager"),S=M(m),w=M(s),y=M(u),x=M(u),k=M(u),B=M(u),L=M(u),R=M(h),P=M(h),_=M(u),v((E=t((C=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"ball",E,a(t)),n(t,"scoreLabel",z,a(t)),n(t,"restartButton",D,a(t)),n(t,"paddleLeft",A,a(t)),n(t,"paddleRight",G,a(t)),n(t,"topWall",O,a(t)),n(t,"bottomWall",U,a(t)),n(t,"winSound",W,a(t)),n(t,"loseSound",Y,a(t)),n(t,"shareButton",N,a(t)),t.leftScore=0,t.rightScore=0,t.maxScore=5,t.gameEnded=!1,t.audio=null,t}r(t,e);var l=t.prototype;return l.onLoad=function(){this.audio=this.node.addComponent(p)},l.start=function(){this.updateScore(),this.restartButton.active=!1,this.shareButton.active=!1;try{var e,t=new URLSearchParams(window.location.search).get("ref");if(t&&!localStorage.getItem("invited_by"))localStorage.setItem("invited_by",t),fetch("https://script.google.com/macros/s/AKfycbyB2wucR6KDet5wucvbdl0kPz1YNYxe5Yh5yH1M9PnmNa5ii3hC0B8fabPF4Bt67DQJ/exec",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:"REPLACE_WITH_YOUR_SECRET_veryLongRandomString_12345",event:"ref_visit",referrer:t,user:(null==(e=window.Telegram)||null==(e=e.WebApp)||null==(e=e.initDataUnsafe)||null==(e=e.user)?void 0:e.id)||"",url:window.location.href,ts:(new Date).toISOString()})}).catch((function(){}))}catch(e){console.warn("Ref param check failed",e)}},l.update=function(){if(!this.gameEnded){var e=this.ball.node.position.x;e<-475?(this.rightScore++,this.updateScore(),this.checkGameEnd()):e>475&&(this.leftScore++,this.updateScore(),this.checkGameEnd())}},l.updateScore=function(){this.scoreLabel.string=this.leftScore+" : "+this.rightScore},l.checkGameEnd=function(){this.leftScore>=this.maxScore||this.rightScore>=this.maxScore?this.endGame():this.resetBall()},l.resetBall=function(){this.ball.resetBall()},l.endGame=function(){this.gameEnded=!0,this.ball.node.active=!1,this.paddleLeft.active=!1,this.paddleRight.active=!1;var e=this.leftScore>this.rightScore;this.scoreLabel.string=e?"Победа!\n"+this.leftScore+" : "+this.rightScore:"Поражение\n"+this.leftScore+" : "+this.rightScore,this.scoreLabel.node.setScale(new d(.1,.1,.1)),this.scoreLabel.color=new f(255,255,255,0),b(this.scoreLabel.node).to(.5,{scale:new d(1,1,1)},{easing:"backOut"}).start(),b(this.scoreLabel).to(.5,{color:new f(255,255,255,255)}).start(),this.audio&&(e&&this.winSound?this.audio.playOneShot(this.winSound,1):!e&&this.loseSound&&this.audio.playOneShot(this.loseSound,1)),this.restartButton.active=!0,this.shareButton.active=!0},l.onRestart=function(){this.leftScore=0,this.rightScore=0,this.updateScore(),this.gameEnded=!1,this.restartButton.active=!1,this.shareButton.active=!1,this.ball.node.active=!0,this.paddleLeft.active=!0,this.paddleRight.active=!0,this.topWall.active=!0,this.bottomWall.active=!0,this.ball.resetBall()},l.uploadScreenshot=function(){var e=i(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://script.google.com/macros/s/AKfycbyB2wucR6KDet5wucvbdl0kPz1YNYxe5Yh5yH1M9PnmNa5ii3hC0B8fabPF4Bt67DQJ/exec?path=upload_image&secret=REPLACE_WITH_YOUR_SECRET_veryLongRandomString_12345&filename=score.png",{method:"POST",body:t,headers:{"Content-Type":"application/octet-stream"}});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(n=e.sent).ok){e.next=9;break}return e.abrupt("return",n.url);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.warn("Upload failed",e.t0);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),l.shareGame=function(){var e=i(o().mark((function e(t){var r,n,a,i,l,c,s,u,h,p,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=null!=(r=null==t?void 0:t.url)?r:window.location.href,c=null!=(n=null==t?void 0:t.title)?n:"Pong Game",s=null!=(a=null==t?void 0:t.text)?a:"Побей мой рекорд в Pong!",u=null!=(i=null==t?void 0:t.secret)?i:null;try{fetch("https://script.google.com/macros/s/AKfycbyB2wucR6KDet5wucvbdl0kPz1YNYxe5Yh5yH1M9PnmNa5ii3hC0B8fabPF4Bt67DQJ/exec",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:u,event:"share_attempt",user:(null==(h=window.Telegram)||null==(h=h.WebApp)||null==(h=h.initDataUnsafe)||null==(h=h.user)?void 0:h.id)||"",url:l,title:c,text:s,ts:(new Date).toISOString()})})}catch(e){}if(e.prev=5,!(d=null==(p=window.Telegram)?void 0:p.WebApp)||"function"!=typeof d.shareURL){e.next=10;break}return d.shareURL(l,s),e.abrupt("return",{ok:!0,method:"telegram"});case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:if(!navigator.share){e.next=24;break}return e.prev=15,e.next=18,navigator.share({title:c,text:s,url:l});case 18:return e.abrupt("return",{ok:!0,method:"navigator"});case 21:return e.prev=21,e.t1=e.catch(15),e.abrupt("return",{ok:!1,error:String(e.t1)});case 24:return e.prev=24,e.next=27,navigator.clipboard.writeText(l);case 27:return alert("Ссылка скопирована. Поделись вручную!"),e.abrupt("return",{ok:!0,method:"clipboard"});case 31:return e.prev=31,e.t2=e.catch(24),alert("Не удалось скопировать. Вот ссылка: "+l),e.abrupt("return",{ok:!1,error:"no_share_api"});case 35:case"end":return e.stop()}}),e,null,[[5,12],[15,21],[24,31]])})));return function(t){return e.apply(this,arguments)}}(),l.onShareClick=function(){var e=i(o().mark((function e(){var t,r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.takeScreenshot(),e.next=3,this.uploadScreenshot(r);case 3:if(n=e.sent){e.next=7;break}return alert("Не удалось загрузить изображение"),e.abrupt("return");case 7:if(!(a=null==(t=window.Telegram)?void 0:t.WebApp)||"function"!=typeof a.shareURL){e.next=12;break}a.shareURL(n,"Мой результат в Pong!"),e.next=15;break;case 12:return e.next=14,navigator.clipboard.writeText(n);case 14:alert("Картинка скопирована! Можете поделиться вручную");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.takeScreenshot=function(){return cc.game.canvas.toDataURL("image/png").replace("data:image/png;base64,","")},t}(g)).prototype,"ball",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(C.prototype,"scoreLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(C.prototype,"restartButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(C.prototype,"paddleLeft",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(C.prototype,"paddleRight",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(C.prototype,"topWall",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(C.prototype,"bottomWall",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(C.prototype,"winSound",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(C.prototype,"loseSound",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(C.prototype,"shareButton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=C))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Ball.ts","./GameManager.ts","./Paddle.ts","./PaddleRight.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Paddle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,r,a,s,h,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.input,h=e.Input,u=e.macro,p=e.Component}],execute:function(){var c,y,l,m,f;r._RF.push({},"b8fa010x4hJma/Grt2+3V5j","Paddle",void 0);var d=a.ccclass,v=a.property;e("Paddle",d("Paddle")((l=t((y=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"speed",l,o(t)),n(t,"minY",m,o(t)),n(t,"maxY",f,o(t)),t.moveDir=0,t}i(t,e);var r=t.prototype;return r.onLoad=function(){s.on(h.EventType.KEY_DOWN,this.onKeyDown,this),s.on(h.EventType.KEY_UP,this.onKeyUp,this),s.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this)},r.onDestroy=function(){s.off(h.EventType.KEY_DOWN,this.onKeyDown,this),s.off(h.EventType.KEY_UP,this.onKeyUp,this),s.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this)},r.onKeyDown=function(e){e.keyCode===u.KEY.up?this.moveDir=1:e.keyCode===u.KEY.down&&(this.moveDir=-1)},r.onKeyUp=function(e){e.keyCode!==u.KEY.up&&e.keyCode!==u.KEY.down||(this.moveDir=0)},r.onTouchMove=function(e){var t=e.getDelta(),i=this.node.position;i.y+=t.y,i.y=Math.min(this.maxY,Math.max(this.minY,i.y)),this.node.setPosition(i)},r.update=function(e){if(0!==this.moveDir){var t=this.node.position;t.y+=this.moveDir*this.speed*e,t.y=Math.min(this.maxY,Math.max(this.minY,t.y)),this.node.setPosition(t)}},r.clampPosition=function(e){var t=e.clone();return t.y=Math.min(this.maxY,Math.max(this.minY,t.y)),t},t}(p)).prototype,"speed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),m=t(y.prototype,"minY",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-280}}),f=t(y.prototype,"maxY",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 280}}),c=y))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/PaddleRight.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,a,o,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,s=e.Component}],execute:function(){var u,c,p,h,d,b,f,y;a._RF.push({},"4a62dOb6qBMoZk71fx6wqaR","PaddleRight",void 0);var m=o.ccclass,g=o.property;e("PaddleRight",(u=m("PaddleRight"),c=g(l),u((d=t((h=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"ball",d,r(t)),n(t,"speed",b,r(t)),n(t,"minY",f,r(t)),n(t,"maxY",y,r(t)),t}return i(t,e),t.prototype.update=function(e){if(this.ball){var t=this.node.position,i=this.ball.position.y-t.y,n=Math.sign(i)*this.speed*e;t.y+=Math.abs(i)<Math.abs(n)?i:n,t.y=Math.min(this.maxY,Math.max(this.minY,t.y)),this.node.setPosition(t)}},t}(s)).prototype,"ball",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(h.prototype,"speed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),f=t(h.prototype,"minY",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-280}}),y=t(h.prototype,"maxY",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 280}}),p=h))||p));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});